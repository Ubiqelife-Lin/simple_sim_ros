<?xml version="1.0"?>
<launch>
  <arg name="use_rviz" default="true"/>
  <!-- launch 8-16 bullet servers, launch rviz only once with special config.
  Spawn the same terrain and obstacles in each sim, and the same vehicle.
  Each should have tf prefix to separate them from the others, but all be in
  the same tree so they can be visualized concurrently. -->

  <group ns="sim1">
    <include file="$(find bullet_server)/launch/bullet_server.launch">
      <arg name="use_rviz" value="false"/>
      <arg name="tf_prefix" value="sim1/"/>
    </include>
    <node pkg="bullet_server" type="init_sim.py" name="init_sim"
        output="screen">
    </node>
  </group>

  <group ns="sim2">
    <include file="$(find bullet_server)/launch/bullet_server.launch">
      <arg name="use_rviz" value="false"/>
      <arg name="tf_prefix" value="sim2/"/>
    </include>
    <node pkg="bullet_server" type="init_sim.py" name="init_sim"
        output="screen">
    </node>
  </group>

  <node pkg="rviz" type="rviz" name="rviz"
      args="-d $(find bullet_server)/config/monte_carlo.rviz"
      if="$(arg use_rviz)"/>

</launch>
